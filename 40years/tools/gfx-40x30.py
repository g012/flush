import matplotlib.image
import numpy
import sys
import json

testdata = \
"........................................"\
"........................................"\
"........................................"\
"........................................"\
"#######.##......##...##.#######.##...##."\
"#######.##......##...##.#######.##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"##......##......##...##.##......##...##."\
"######..##......##...##.#######.#######."\
"######..##......##...##.#######.#######."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......##......##...##......##.##...##."\
"##......#######.#######.#######.##...##."\
"##......#######.#######.#######.##...##."\
"........................................"\
"........................................"\
"........................................"\
"........................................"\
"........................................"\


def pfint(s):
    n = 0
    for i in xrange(8):
        n <<= 1
        n += 1 if s[i] != '.' else 0
    return n

def list2int(l):
    n = 0
    while l:
        n <<= 1
        n += l.pop(0)
    return n

def getpf(data):
    pf = [[] for i in xrange(6)]
    for i in xrange(30):
        j = i * 40
        tmp = [""]*6
        tmp[0] = data[j    : j+4 ][::-1] + "...."
        tmp[1] = data[j+4  : j+12]
        tmp[2] = data[j+12 : j+20][::-1]
        tmp[3] = data[j+20 : j+24][::-1] + "...."
        tmp[4] = data[j+24 : j+32]
        tmp[5] = data[j+32 : j+40][::-1]
        for k in xrange(6):
            pf[k].append(pfint(tmp[k]))
    return pf

def img2pf(image):
    pf = [[] for i in xrange(6)]
    for raw in image:
        ln = [1 if c[:3].any() else 0 for c in raw]
        tmp = [""]*6
        tmp[0] = ln[0 :4 ][::-1] + [0]*4
        tmp[1] = ln[4 :12]
        tmp[2] = ln[12:20][::-1]
        tmp[3] = ln[20:24][::-1] + [0]*4
        tmp[4] = ln[24:32]
        tmp[5] = ln[32:40][::-1]
        for k in xrange(6):
            pf[k].append(list2int(tmp[k]))
    return pf

def main():
    # Parses colors from the playfield graphic
    im = matplotlib.image.imread(sys.argv[1])
    pf = img2pf(im)
    result = [{
        "data": list(reversed(pf[i])),
        "name": "pic_pf{}".format(i)
    } for i in xrange(6)]

    print json.dumps(result)

main()
